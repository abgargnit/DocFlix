{"ast":null,"code":"var _jsxFileName = \"/Users/abgarg/Desktop/DocFlix/client/src/Components/Editor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Box } from '@mui/material';\nimport styled from '@emotion/styled';\nimport Quill from 'quill';\nimport \"quill/dist/quill.snow.css\";\nimport { io } from 'socket.io-client';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Component = styled.div`\nbackground: #F5F5F5\n`;\n_c = Component;\nconst toolbarOptions = [['bold', 'italic', 'underline', 'strike'],\n// toggled buttons\n['blockquote', 'code-block'], ['link', 'image', 'video', 'formula'], [{\n  'header': 1\n}, {\n  'header': 2\n}],\n// custom button values\n[{\n  'list': 'ordered'\n}, {\n  'list': 'bullet'\n}, {\n  'list': 'check'\n}], [{\n  'script': 'sub'\n}, {\n  'script': 'super'\n}],\n// superscript/subscript\n[{\n  'indent': '-1'\n}, {\n  'indent': '+1'\n}],\n// outdent/indent\n[{\n  'direction': 'rtl'\n}],\n// text direction\n\n[{\n  'size': ['small', false, 'large', 'huge']\n}],\n// custom dropdown\n[{\n  'header': [1, 2, 3, 4, 5, 6, false]\n}], [{\n  'color': []\n}, {\n  'background': []\n}],\n// dropdown with defaults from theme\n[{\n  'font': []\n}], [{\n  'align': []\n}], ['clean'] // remove formatting button\n];\nconst Editor = () => {\n  _s();\n  const [socket, setSocket] = useState();\n  const [quill, setQuill] = useState();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const quillServer = new Quill('#container', {\n      modules: {\n        toolbar: toolbarOptions\n      },\n      theme: 'snow'\n    });\n    quillServer.disable();\n    quillServer.setText('Loading the documnet...');\n    setQuill(quillServer);\n  }, []);\n  useEffect(() => {\n    const socketServer = io(\"http://localhost:9000\");\n    setSocket(socketServer);\n    return () => {\n      socketServer.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    if (quill === null || socket === null) return;\n    const handleChange = (delta, oldData, source) => {\n      if (source !== 'user') return;\n      socket && socket.emit('send-changes', delta);\n    };\n    quill && quill.on('text-change', handleChange);\n    return () => {\n      quill && quill.off('text-change', handleChange);\n    };\n  }, [quill, socket]);\n  useEffect(() => {\n    if (quill === null || socket === null) return;\n    const handleChange = delta => {\n      quill.updateContents(delta);\n    };\n    socket && socket.on('receive-changes', handleChange);\n    return () => {\n      socket && socket.off('receive-changes', handleChange);\n    };\n  }, [quill, socket]);\n  useEffect(() => {\n    if (quill === null || socket === null) return;\n    socket.once('load-documnet', documnet => {});\n    socket && socket.emit('get-document', id);\n  }, [quill, socket, id]);\n  return /*#__PURE__*/_jsxDEV(Component, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      className: \"container\",\n      id: \"container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(Editor, \"/2PGFMR6zh0DbdJ0tV0zqfyPkv8=\", false, function () {\n  return [useParams];\n});\n_c2 = Editor;\nexport default Editor;\nvar _c, _c2;\n$RefreshReg$(_c, \"Component\");\n$RefreshReg$(_c2, \"Editor\");","map":{"version":3,"names":["React","useEffect","useState","Box","styled","Quill","io","useParams","jsxDEV","_jsxDEV","Component","div","_c","toolbarOptions","Editor","_s","socket","setSocket","quill","setQuill","id","quillServer","modules","toolbar","theme","disable","setText","socketServer","disconnect","handleChange","delta","oldData","source","emit","on","off","updateContents","once","documnet","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/Users/abgarg/Desktop/DocFlix/client/src/Components/Editor.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box } from '@mui/material';\nimport styled from '@emotion/styled';\nimport Quill from 'quill';\nimport \"quill/dist/quill.snow.css\";\nimport { io } from 'socket.io-client'\nimport { useParams } from 'react-router-dom';\n\nconst Component = styled.div`\nbackground: #F5F5F5\n`\n\nconst toolbarOptions = [\n    ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\n    ['blockquote', 'code-block'],\n    ['link', 'image', 'video', 'formula'],\n  \n    [{ 'header': 1 }, { 'header': 2 }],               // custom button values\n    [{ 'list': 'ordered'}, { 'list': 'bullet' }, { 'list': 'check' }],\n    [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\n    [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n    [{ 'direction': 'rtl' }],                         // text direction\n  \n    [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\n    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n  \n    [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\n    [{ 'font': [] }],\n    [{ 'align': [] }],\n  \n    ['clean']                                         // remove formatting button\n  ];\n\nconst Editor = () => {\n  const [socket,setSocket] = useState();\n  const [quill,setQuill] = useState();\n  const { id } = useParams();\n\n\n  useEffect(() => {\n    const quillServer = new Quill('#container', {\n        modules: {\n          toolbar: toolbarOptions\n        },\n        theme: 'snow'\n      });\n      quillServer.disable();\n      quillServer.setText('Loading the documnet...');\n      setQuill(quillServer);     \n  }, []);\n\n  useEffect(()=>{\n    const socketServer = io(\"http://localhost:9000\");\n    setSocket(socketServer);\n    return () => {\n      socketServer.disconnect();\n    }\n  },[]);\n\n  useEffect(()=>{\n    if(quill === null || socket === null) return ;\n\n    const handleChange = (delta,oldData,source)=>{\n      if(source!== 'user') return;\n\n      socket && socket.emit('send-changes', delta);\n  }\n    quill && quill.on('text-change',handleChange)\n    return ()=>{\n      quill && quill.off('text-change',handleChange);\n    }\n    },[quill,socket]);\n\n    useEffect(()=>{\n      if(quill === null || socket === null) return ;\n  \n      const handleChange = (delta)=>{\n        quill.updateContents(delta);\n    }\n      socket && socket.on('receive-changes',handleChange)\n      return ()=>{\n        socket && socket.off('receive-changes',handleChange);\n      }\n      },[quill,socket]);\n\n    useEffect(()=>{\n      if(quill === null || socket===null) return ;\n      socket.once('load-documnet', documnet=>{\n        \n      })\n      socket && socket.emit('get-document', id);\n    },[quill,socket,id]);\n\n  return (\n    <Component>\n            <Box className = 'container' id='container'>\n            </Box>\n    </Component>\n\n  );\n}\n\nexport default Editor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}